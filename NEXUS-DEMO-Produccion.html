<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXUS Centro Log√≠stico - Demo Interactivo</title>
    <meta name="description" content="Demo interactivo del chatbot de NEXUS Centro Log√≠stico en Manzanillo, Colima">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè≠</text></svg>">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #60a5fa 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* Animated background elements */
        .bg-shapes {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
            pointer-events: none;
        }

        .shape {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            animation: float 20s infinite;
        }

        .shape:nth-child(1) {
            width: 100px;
            height: 100px;
            top: 10%;
            left: 10%;
            animation-delay: 0s;
        }

        .shape:nth-child(2) {
            width: 150px;
            height: 150px;
            top: 70%;
            left: 80%;
            animation-delay: 5s;
        }

        .shape:nth-child(3) {
            width: 80px;
            height: 80px;
            top: 40%;
            left: 70%;
            animation-delay: 10s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0); }
            25% { transform: translateY(-30px) translateX(20px); }
            50% { transform: translateY(-60px) translateX(-20px); }
            75% { transform: translateY(-30px) translateX(10px); }
        }

        .demo-container {
            background: white;
            border-radius: 24px;
            padding: 50px;
            max-width: 1400px;
            width: 100%;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 1;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .demo-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .demo-badge {
            display: inline-block;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 10px 24px;
            border-radius: 30px;
            font-size: 15px;
            font-weight: 700;
            margin-bottom: 20px;
            letter-spacing: 0.5px;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
            animation: pulse-badge 2s infinite;
        }

        @keyframes pulse-badge {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .demo-header h1 {
            color: #1e40af;
            font-size: 42px;
            margin-bottom: 12px;
            font-weight: 800;
        }

        .demo-header .subtitle {
            color: #64748b;
            font-size: 19px;
            margin-bottom: 8px;
        }

        .demo-header .location {
            color: #3b82f6;
            font-size: 16px;
            font-weight: 600;
        }

        /* Feature Grid */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .feature-card {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            padding: 25px;
            border-radius: 16px;
            border-left: 5px solid #3b82f6;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 24px rgba(59, 130, 246, 0.2);
        }

        .feature-card .icon {
            font-size: 36px;
            margin-bottom: 12px;
        }

        .feature-card h3 {
            color: #1e40af;
            font-size: 18px;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .feature-card p {
            color: #475569;
            font-size: 14px;
            line-height: 1.6;
        }

        /* Highlights Section */
        .highlights {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-left: 5px solid #f59e0b;
            padding: 30px;
            border-radius: 16px;
            margin-bottom: 35px;
        }

        .highlights h3 {
            color: #b45309;
            font-size: 22px;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .highlights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .highlight-item {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .highlight-item .emoji {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .highlight-item strong {
            color: #b45309;
            display: block;
            margin-bottom: 6px;
            font-size: 16px;
        }

        .highlight-item p {
            color: #78716c;
            font-size: 14px;
        }

        /* CTA Section */
        .cta-section {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 12px 32px rgba(30, 64, 175, 0.3);
        }

        .cta-section h2 {
            font-size: 32px;
            margin-bottom: 15px;
            font-weight: 800;
        }

        .cta-section p {
            font-size: 18px;
            margin-bottom: 25px;
            opacity: 0.95;
        }

        .cta-button {
            background: white;
            color: #1e40af;
            border: none;
            padding: 18px 40px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .cta-button:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 28px rgba(0, 0, 0, 0.3);
        }

        /* Instructions */
        .instructions {
            background: #f8fafc;
            padding: 30px;
            border-radius: 16px;
            margin-bottom: 30px;
        }

        .instructions h3 {
            color: #1e293b;
            font-size: 22px;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .instruction-list {
            display: grid;
            gap: 15px;
        }

        .instruction-item {
            background: white;
            padding: 18px;
            border-radius: 12px;
            border-left: 4px solid #3b82f6;
            display: flex;
            align-items: start;
            gap: 15px;
        }

        .instruction-item .number {
            background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            flex-shrink: 0;
        }

        .instruction-item .content {
            flex: 1;
        }

        .instruction-item strong {
            color: #1e40af;
            display: block;
            margin-bottom: 5px;
            font-size: 15px;
        }

        .instruction-item p {
            color: #64748b;
            font-size: 14px;
        }

        /* Footer */
        .demo-footer {
            text-align: center;
            padding-top: 30px;
            border-top: 2px solid #e2e8f0;
            color: #64748b;
            font-size: 14px;
        }

        .demo-footer a {
            color: #3b82f6;
            text-decoration: none;
            font-weight: 600;
        }

        .demo-footer a:hover {
            text-decoration: underline;
        }

        /* Chat Widget Button */
        .chat-widget-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 75px;
            height: 75px;
            border-radius: 50%;
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            border: none;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(30, 64, 175, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease;
            z-index: 1000;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0) scale(1); }
            40% { transform: translateY(-15px) scale(1.05); }
            60% { transform: translateY(-8px) scale(1.02); }
        }

        .chat-widget-button:hover {
            transform: scale(1.15);
            animation: none;
        }

        .chat-widget-button svg {
            width: 36px;
            height: 36px;
            fill: white;
        }

        .notification-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ef4444;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: bold;
            animation: pulse 2s infinite;
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        /* Chat Container - MISMO C√ìDIGO DEL CHATBOT ANTERIOR */
        .chat-container {
            position: fixed;
            bottom: 130px;
            right: 30px;
            width: 440px;
            height: 700px;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            display: none;
            flex-direction: column;
            overflow: hidden;
            z-index: 1000;
            animation: slideUp 0.4s ease;
        }

        .chat-container.active {
            display: flex;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(40px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .chat-header {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            color: white;
            padding: 26px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .chat-header-info {
            display: flex;
            align-items: center;
            gap: 14px;
        }

        .agent-avatar {
            width: 54px;
            height: 54px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .agent-details h3 {
            font-size: 18px;
            margin-bottom: 5px;
            font-weight: 700;
        }

        .agent-status {
            font-size: 13px;
            opacity: 0.95;
            display: flex;
            align-items: center;
            gap: 7px;
        }

        .status-dot {
            width: 9px;
            height: 9px;
            background: #10b981;
            border-radius: 50%;
            animation: blink 2s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .close-chat {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            font-size: 30px;
            cursor: pointer;
            padding: 8px;
            line-height: 1;
            transition: all 0.2s;
            border-radius: 8px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-chat:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 24px;
            background: #f9fafb;
        }

        .messages-container::-webkit-scrollbar {
            width: 6px;
        }

        .messages-container::-webkit-scrollbar-track {
            background: #f1f5f9;
        }

        .messages-container::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }

        .message {
            margin-bottom: 18px;
            display: flex;
            gap: 12px;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.bot {
            flex-direction: row;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 34px;
            height: 34px;
            border-radius: 50%;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 17px;
        }

        .message.bot .message-avatar {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            color: white;
        }

        .message.user .message-avatar {
            background: #e5e7eb;
        }

        .message-content {
            max-width: 78%;
        }

        .message-bubble {
            padding: 14px 18px;
            border-radius: 18px;
            line-height: 1.6;
            font-size: 14px;
        }

        .message.bot .message-bubble {
            background: white;
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
        }

        .message.user .message-bubble {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            color: white;
            border-bottom-right-radius: 4px;
        }

        .message-time {
            font-size: 11px;
            color: #9ca3af;
            margin-top: 5px;
            padding: 0 5px;
        }

        .quick-replies {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 12px;
        }

        .quick-reply-btn {
            background: white;
            border: 2px solid #3b82f6;
            color: #3b82f6;
            padding: 11px 20px;
            border-radius: 26px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 600;
        }

        .quick-reply-btn:hover {
            background: #3b82f6;
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(59, 130, 246, 0.3);
        }

        .typing-indicator {
            display: flex;
            gap: 5px;
            padding: 14px 18px;
            background: white;
            border-radius: 18px;
            border-bottom-left-radius: 4px;
            width: fit-content;
        }

        .typing-dot {
            width: 9px;
            height: 9px;
            background: #9ca3af;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-12px); }
        }

        .input-container {
            padding: 22px;
            background: white;
            border-top: 1px solid #e5e7eb;
        }

        .input-wrapper {
            display: flex;
            gap: 14px;
            align-items: center;
        }

        .chat-input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #e5e7eb;
            border-radius: 30px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.2s ease;
            font-family: inherit;
        }

        .chat-input:focus {
            border-color: #3b82f6;
        }

        .send-button {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            border: none;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s ease;
        }

        .send-button:hover {
            transform: scale(1.12);
        }

        .send-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .zone-card {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-left: 4px solid #3b82f6;
            border-radius: 14px;
            padding: 16px;
            margin-top: 10px;
        }

        .zone-card h4 {
            color: #1e40af;
            margin-bottom: 10px;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 700;
        }

        .zone-card .price {
            font-size: 20px;
            font-weight: bold;
            color: #1e40af;
            margin: 8px 0;
        }

        .zone-card .description {
            font-size: 13px;
            color: #475569;
            font-style: italic;
        }

        .info-card {
            background: #f3f4f6;
            border-radius: 12px;
            padding: 14px;
            margin-top: 10px;
            font-size: 13px;
        }

        .info-card ul {
            list-style: none;
            color: #4b5563;
        }

        .info-card li {
            margin-bottom: 7px;
            padding-left: 20px;
            position: relative;
        }

        .info-card li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #10b981;
            font-weight: bold;
            font-size: 15px;
        }

        .highlight-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-left: 4px solid #f59e0b;
            padding: 14px;
            border-radius: 10px;
            margin-top: 10px;
        }

        .highlight-box strong {
            color: #b45309;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .demo-container {
                padding: 40px;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .demo-container {
                padding: 30px 20px;
            }

            .demo-header h1 {
                font-size: 32px;
            }

            .features-grid {
                grid-template-columns: 1fr;
            }

            .chat-container {
                width: calc(100vw - 20px);
                height: calc(100vh - 160px);
                right: 10px;
                bottom: 90px;
            }

            .chat-widget-button {
                right: 15px;
                bottom: 15px;
                width: 65px;
                height: 65px;
            }
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="bg-shapes">
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
    </div>

    <!-- Main Demo Container -->
    <div class="demo-container">
        <div class="demo-header">
            <span class="demo-badge">‚ú® DEMO INTERACTIVA - PRODUCCI√ìN</span>
            <h1>üè≠ NEXUS Centro Log√≠stico</h1>
            <p class="subtitle">La Nueva Generaci√≥n de Parques Industriales Inteligentes</p>
            <p class="location">üìç Manzanillo, Colima</p>
        </div>

        <!-- Highlights Section -->
        <div class="highlights">
            <h3>üéØ Ubicaci√≥n Estrat√©gica √önica</h3>
            <div class="highlights-grid">
                <div class="highlight-item">
                    <div class="emoji">‚öì</div>
                    <strong>2 Minutos del Puerto</strong>
                    <p>Vaso 2 de la Laguna de Cuyutl√°n - Nuevo Puerto de Manzanillo</p>
                </div>
                <div class="highlight-item">
                    <div class="emoji">üõ£Ô∏è</div>
                    <strong>7 Minutos Autopista</strong>
                    <p>Conexi√≥n directa con Autopista Manzanillo-Guadalajara</p>
                </div>
                <div class="highlight-item">
                    <div class="emoji">üè≠</div>
                    <strong>34 Lotes Disponibles</strong>
                    <p>Desde 500 m¬≤ hasta 3,000 m¬≤ en 4 zonas premium</p>
                </div>
            </div>
        </div>

        <!-- Features Grid -->
        <div class="features-grid">
            <div class="feature-card">
                <div class="icon">üíé</div>
                <h3>4 Zonas Diferenciadas</h3>
                <p>Desde $5,000/m¬≤ (Industrial) hasta $9,000/m¬≤ (Platinum). Elige la zona perfecta para tu operaci√≥n.</p>
            </div>

            <div class="feature-card">
                <div class="icon">üí≥</div>
                <h3>Financiamiento Flexible</h3>
                <p>Hasta 48 meses con enganche del 50%. Promociones especiales en preventa.</p>
            </div>

            <div class="feature-card">
                <div class="icon">üèóÔ∏è</div>
                <h3>Infraestructura Premium</h3>
                <p>Business Center, comedores, salas de capacitaci√≥n, seguridad 24/7 y m√°s.</p>
            </div>

            <div class="feature-card">
                <div class="icon">üå±</div>
                <h3>Sustentable e Inteligente</h3>
                <p>Parque industrial moderno orientado a industria ligera y bajo riesgo.</p>
            </div>

            <div class="feature-card">
                <div class="icon">ü§ñ</div>
                <h3>Chatbot con IA</h3>
                <p>Calificaci√≥n autom√°tica de leads, recomendaciones personalizadas y agendamiento 24/7.</p>
            </div>

            <div class="feature-card">
                <div class="icon">üìä</div>
                <h3>Lead Scoring Inteligente</h3>
                <p>Sistema que identifica y prioriza clientes potenciales autom√°ticamente.</p>
            </div>
        </div>

        <!-- Instructions -->
        <div class="instructions">
            <h3>üß™ Prueba el Chatbot Inteligente</h3>
            <div class="instruction-list">
                <div class="instruction-item">
                    <div class="number">1</div>
                    <div class="content">
                        <strong>Haz clic en el bot√≥n azul üè≠</strong>
                        <p>Ubicado en la esquina inferior derecha para abrir el chat</p>
                    </div>
                </div>

                <div class="instruction-item">
                    <div class="number">2</div>
                    <div class="content">
                        <strong>Explora las 4 zonas premium</strong>
                        <p>Industrial ($5k), Business ($6k), Executive ($7.5k), Platinum ($9k)</p>
                    </div>
                </div>

                <div class="instruction-item">
                    <div class="number">3</div>
                    <div class="content">
                        <strong>Prueba las validaciones inteligentes</strong>
                        <p>Escribe "necesito 1200 metros" y el bot interpretar√° "1,000-2,000 m¬≤"</p>
                    </div>
                </div>

                <div class="instruction-item">
                    <div class="number">4</div>
                    <div class="content">
                        <strong>Completa el flujo de agendamiento</strong>
                        <p>El sistema validar√° email, tel√©fono y calcular√° tu lead score</p>
                    </div>
                </div>

                <div class="instruction-item">
                    <div class="number">5</div>
                    <div class="content">
                        <strong>Revisa la consola (F12)</strong>
                        <p>Al finalizar ver√°s los datos capturados con lead score</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- CTA Section -->
        <div class="cta-section">
            <h2>¬øListo para probarlo?</h2>
            <p>Haz clic en el bot√≥n flotante azul en la esquina inferior derecha ‚ÜòÔ∏è</p>
            <button class="cta-button" onclick="document.getElementById('chatToggle').click()">
                <span>üí¨</span>
                Abrir Chatbot NEXUS
            </button>
        </div>

        <!-- Footer -->
        <div class="demo-footer">
            <p>
                <strong>Demo creado por Claude AI</strong> ‚Ä¢ 
                Chatbot totalmente funcional listo para producci√≥n ‚Ä¢ 
                <a href="https://www.nuusca.com" target="_blank">www.nuusca.com</a>
            </p>
            <p style="margin-top: 10px; font-size: 12px;">
                Contacto: Judith Leal ‚Ä¢ WhatsApp: 341 170 7365 ‚Ä¢ asesorajudithleal@gmail.com
            </p>
        </div>
    </div>

    <!-- Chat Widget Button -->
    <button class="chat-widget-button" id="chatToggle">
        <svg viewBox="0 0 24 24">
            <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/>
        </svg>
        <span class="notification-badge">!</span>
    </button>

    <!-- Chat Container -->
    <div class="chat-container" id="chatContainer">
        <div class="chat-header">
            <div class="chat-header-info">
                <div class="agent-avatar">üè≠</div>
                <div class="agent-details">
                    <h3>NEXUS - Judith Leal</h3>
                    <div class="agent-status">
                        <span class="status-dot"></span>
                        Disponible ahora
                    </div>
                </div>
            </div>
            <button class="close-chat" id="closeChat">√ó</button>
        </div>

        <div class="messages-container" id="messagesContainer"></div>

        <div class="input-container">
            <div class="input-wrapper">
                <input 
                    type="text" 
                    class="chat-input" 
                    id="chatInput" 
                    placeholder="Escribe tu mensaje..."
                    autocomplete="off"
                >
                <button class="send-button" id="sendButton">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <script>
        // NEXUS CONFIGURATION - All project data
        const NEXUS_CONFIG = {
            nombre: "NEXUS Centro Log√≠stico",
            ubicacion: "Carretera Laguna de Cuyutl√°n, Florida, 28809 Manzanillo, Colima",
            municipio: "Manzanillo, Colima",
            maps_link: "https://maps.app.goo.gl/ukBzLEAos65wrimN7?g_st=ic",
            
            asesora: "Judith Leal",
            telefono: "341 170 7365",
            whatsapp: "3411707365",
            email: "asesorajudithleal@gmail.com",
            horario: "Lunes a Viernes: 9:00 AM - 6:00 PM | S√°bados y Domingos: 9:00 AM - 2:00 PM",
            website: "NUUSCA.COM",
            
            total_lotes: 34,
            terrenos_desde: "500 m¬≤",
            terrenos_hasta: "3,000 m¬≤",
            precio_desde: "$3,000,000 MXN",
            
            zonas: [
                {
                    nombre: "Zona Industrial",
                    precio_m2: "$5,000 MXN/m¬≤",
                    precio_num: 5000,
                    descripcion: "Ideal para operaciones pesadas",
                    emoji: "üè≠"
                },
                {
                    nombre: "Zona Business",
                    precio_m2: "$6,000 MXN/m¬≤",
                    precio_num: 6000,
                    descripcion: "Perfecta para centros de distribuci√≥n y ecommerce",
                    emoji: "üì¶"
                },
                {
                    nombre: "Zona Executive",
                    precio_m2: "$7,500 MXN/m¬≤",
                    precio_num: 7500,
                    descripcion: "Para imagen corporativa y oficinas log√≠sticas",
                    emoji: "üè¢"
                },
                {
                    nombre: "Zona Platinum",
                    precio_m2: "$9,000 MXN/m¬≤",
                    precio_num: 9000,
                    descripcion: "Zona premium para empresas de alto nivel",
                    emoji: "üíé"
                }
            ],
            
            ventajas_ubicacion: [
                "A solo 2 minutos del Vaso 2 de la Laguna de Cuyutl√°n (nuevo Puerto de Manzanillo)",
                "A 7 minutos de la Autopista Manzanillo-Guadalajara",
                "Acceso directo a vialidades de alto desempe√±o"
            ],
            
            infraestructura: [
                "Business Center",
                "Comedores",
                "√Åreas de descanso para choferes",
                "Sistema contra incendios",
                "Salas de capacitaci√≥n y juntas",
                "Accesos controlados",
                "Seguridad 24/7"
            ],
            
            financiamiento: {
                contado_promocion: "Promoci√≥n especial negociable",
                contado_beneficio: "Ratificaci√≥n notarial GRATIS",
                financiado_plazo: "48 meses",
                financiado_enganche: "50%",
                financiado_tasa: "12% anual",
                financiado_ratificacion: "$2,000 MXN"
            },
            
            preguntasCalificacion: [
                {
                    id: "superficie",
                    pregunta: "¬øQu√© superficie necesitas aproximadamente?",
                    opciones: ["500-1,000 m¬≤", "1,000-2,000 m¬≤", "2,000-3,000 m¬≤", "M√°s de 3,000 m¬≤"],
                    campo: "superficie_requerida"
                },
                {
                    id: "uso",
                    pregunta: "¬øPara qu√© tipo de operaci√≥n es?",
                    opciones: ["Almacenaje/Bodega", "Manufactura ligera", "Log√≠stica/Distribuci√≥n", "Oficinas corporativas"],
                    campo: "tipo_operacion"
                },
                {
                    id: "urgencia",
                    pregunta: "¬øEn qu√© plazo necesitas el terreno?",
                    opciones: ["Inmediato", "1-3 meses", "3-6 meses", "M√°s de 6 meses"],
                    campo: "urgencia"
                },
                {
                    id: "presupuesto",
                    pregunta: "¬øCu√°l es tu presupuesto aproximado?",
                    opciones: ["$3-5 millones", "$5-10 millones", "$10-20 millones", "M√°s de $20 millones"],
                    campo: "presupuesto"
                }
            ]
        };

        const conversationState = {
            stage: 'greeting',
            userData: {},
            currentQuestionIndex: 0,
            leadScore: 0,
            messagesCount: 0,
            failedAttempts: {}
        };

        // DOM Elements
        const chatToggle = document.getElementById('chatToggle');
        const chatContainer = document.getElementById('chatContainer');
        const closeChat = document.getElementById('closeChat');
        const messagesContainer = document.getElementById('messagesContainer');
        const chatInput = document.getElementById('chatInput');
        const sendButton = document.getElementById('sendButton');
        const notificationBadge = document.querySelector('.notification-badge');

        // Event Listeners
        chatToggle.addEventListener('click', () => {
            chatContainer.classList.add('active');
            notificationBadge.style.display = 'none';
            if (conversationState.messagesCount === 0) {
                setTimeout(initializeConversation, 500);
            }
            chatInput.focus();
        });

        closeChat.addEventListener('click', () => {
            chatContainer.classList.remove('active');
        });

        sendButton.addEventListener('click', sendMessage);
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });

        // Core Functions
        function addMessage(text, isBot = true, options = {}) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isBot ? 'bot' : 'user'}`;
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = isBot ? 'üè≠' : 'üë§';
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            
            const bubble = document.createElement('div');
            bubble.className = 'message-bubble';
            bubble.innerHTML = text;
            
            const time = document.createElement('div');
            time.className = 'message-time';
            time.textContent = new Date().toLocaleTimeString('es-MX', { hour: '2-digit', minute: '2-digit' });
            
            contentDiv.appendChild(bubble);
            contentDiv.appendChild(time);
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(contentDiv);
            
            messagesContainer.appendChild(messageDiv);
            
            if (options.quickReplies && options.quickReplies.length > 0) {
                const quickRepliesDiv = document.createElement('div');
                quickRepliesDiv.className = 'quick-replies';
                
                options.quickReplies.forEach(reply => {
                    const btn = document.createElement('button');
                    btn.className = 'quick-reply-btn';
                    btn.textContent = reply;
                    btn.onclick = () => handleQuickReply(reply);
                    quickRepliesDiv.appendChild(btn);
                });
                
                contentDiv.appendChild(quickRepliesDiv);
            }
            
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            conversationState.messagesCount++;
        }

        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot';
            typingDiv.id = 'typing-indicator';
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = 'üè≠';
            
            const indicator = document.createElement('div');
            indicator.className = 'typing-indicator';
            indicator.innerHTML = '<div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>';
            
            typingDiv.appendChild(avatar);
            typingDiv.appendChild(indicator);
            messagesContainer.appendChild(typingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function hideTypingIndicator() {
            const indicator = document.getElementById('typing-indicator');
            if (indicator) indicator.remove();
        }

        function sendMessage() {
            const text = chatInput.value.trim();
            if (!text) return;
            
            addMessage(text, false);
            chatInput.value = '';
            
            showTypingIndicator();
            setTimeout(() => {
                hideTypingIndicator();
                processUserInput(text);
            }, 1000 + Math.random() * 1000);
        }

        function handleQuickReply(reply) {
            addMessage(reply, false);
            document.querySelectorAll('.quick-replies').forEach(el => el.remove());
            
            showTypingIndicator();
            setTimeout(() => {
                hideTypingIndicator();
                processUserInput(reply);
            }, 800);
        }

        function initializeConversation() {
            addMessage(`¬°Hola! üëã Soy <strong>Judith Leal</strong>, tu asesora en <strong>NEXUS Centro Log√≠stico</strong>.`);
            
            setTimeout(() => {
                addMessage(
                    `üìç La nueva generaci√≥n de parques industriales <strong>inteligentes y sustentables</strong> en Manzanillo, Colima.<br><br>` +
                    `Terrenos desde <strong>500m¬≤</strong> hasta <strong>3,000m¬≤</strong> con ubicaci√≥n estrat√©gica √∫nica.`
                );
            }, 1500);
            
            setTimeout(() => {
                const locationBox = `
                    <div class="highlight-box">
                        <strong>üéØ Ubicaci√≥n Estrat√©gica:</strong><br>
                        ‚Ä¢ A 2 min del nuevo Puerto de Manzanillo<br>
                        ‚Ä¢ A 7 min de Autopista Manzanillo-Guadalajara
                    </div>
                `;
                addMessage(locationBox);
            }, 3000);
            
            setTimeout(() => {
                addMessage(
                    `¬øTe gustar√≠a conocer nuestras <strong>4 zonas premium</strong> y precios?`,
                    true,
                    { quickReplies: ['S√≠, ver zonas', 'Ver ubicaci√≥n', 'Agendar visita'] }
                );
                conversationState.stage = 'initial_interest';
            }, 4200);
        }

        function processUserInput(input) {
            const lowerInput = input.toLowerCase();
            
            switch (conversationState.stage) {
                case 'initial_interest':
                    handleInitialInterest(input);
                    break;
                case 'qualifying':
                    handleQualifyingQuestion(input);
                    break;
                case 'collecting_contact':
                    handleContactCollection(input);
                    break;
                case 'scheduling':
                    handleScheduling(input);
                    break;
                case 'pre_contact':
                case 'post_zones':
                case 'calculation_result':
                    handlePreContact(input);
                    break;
                default:
                    handleGeneralQuery(input);
            }
        }

        function handleInitialInterest(input) {
            const lowerInput = input.toLowerCase();
            
            if (lowerInput.includes('zona') || lowerInput.includes('precio') || 
                lowerInput.includes('s√≠') || lowerInput.includes('si') ||
                lowerInput.includes('ver')) {
                showZones();
            }
            else if (lowerInput.includes('ubicaci√≥n') || lowerInput.includes('ubicacion') || 
                     lowerInput.includes('donde') || lowerInput.includes('mapa')) {
                showLocation();
            }
            else if (lowerInput.includes('agendar') || lowerInput.includes('visita')) {
                conversationState.stage = 'collecting_contact';
                addMessage(`Perfecto! Agendemos tu visita a NEXUS. ¬øCu√°l es tu nombre completo?`);
            }
            else {
                addMessage(`Te puedo ayudar con informaci√≥n sobre NEXUS. ¬øQu√© te gustar√≠a saber?`,
                    true,
                    { quickReplies: ['Ver zonas y precios', 'Ubicaci√≥n', 'Financiamiento', 'Agendar visita'] }
                );
            }
        }

        function showZones() {
            addMessage(`üíé <strong>NEXUS tiene 4 zonas con precios diferenciados:</strong>`);
            
            NEXUS_CONFIG.zonas.forEach((zona, index) => {
                setTimeout(() => {
                    const zoneHTML = `
                        <div class="zone-card">
                            <h4>${zona.emoji} ${zona.nombre}</h4>
                            <div class="price">${zona.precio_m2}</div>
                            <div class="description">${zona.descripcion}</div>
                        </div>
                    `;
                    addMessage(zoneHTML);
                }, 600 * (index + 1));
            });
            
            setTimeout(() => {
                const promoBox = `
                    <div class="highlight-box">
                        <strong>üéÅ PREVENTA:</strong> Precios preferenciales disponibles<br>
                        <strong>üí∞ Desde:</strong> $3,000,000 MXN
                    </div>
                `;
                addMessage(promoBox);
            }, 2800);
            
            setTimeout(() => {
                addMessage(
                    `¬øTe gustar√≠a que calculemos tu inversi√≥n o conocer el financiamiento?`,
                    true,
                    { quickReplies: ['Calcular inversi√≥n', 'Ver financiamiento', 'Agendar visita'] }
                );
                conversationState.stage = 'post_zones';
            }, 3400);
        }

        function showLocation() {
            addMessage(`üìç <strong>NEXUS Centro Log√≠stico</strong>`);
            
            setTimeout(() => {
                const locationHTML = `
                    <div class="info-card">
                        <strong>Direcci√≥n:</strong><br>
                        ${NEXUS_CONFIG.ubicacion}<br><br>
                        
                        <strong>üéØ Ventajas Estrat√©gicas:</strong>
                        <ul>
                            ${NEXUS_CONFIG.ventajas_ubicacion.map(v => `<li>${v}</li>`).join('')}
                        </ul>
                    </div>
                `;
                addMessage(locationHTML);
            }, 1000);
            
            setTimeout(() => {
                addMessage(
                    `<a href="${NEXUS_CONFIG.maps_link}" target="_blank" style="color: #3b82f6; font-weight: bold; text-decoration: none;">üìå Ver en Google Maps ‚Üí</a>`,
                    true,
                    { quickReplies: ['Ver zonas', 'Agendar visita', 'M√°s informaci√≥n'] }
                );
            }, 2200);
        }

        function showFinancing() {
            addMessage(`üí∞ <strong>Opciones de Financiamiento NEXUS:</strong>`);
            
            setTimeout(() => {
                const financingHTML = `
                    <div class="info-card">
                        <strong>‚úÖ Opci√≥n 1: Pago de Contado</strong>
                        <ul>
                            <li>${NEXUS_CONFIG.financiamiento.contado_promocion}</li>
                            <li><strong>Beneficio:</strong> ${NEXUS_CONFIG.financiamiento.contado_beneficio}</li>
                        </ul>
                        <br>
                        <strong>üí≥ Opci√≥n 2: Financiamiento Interno</strong>
                        <ul>
                            <li>Plazo: ${NEXUS_CONFIG.financiamiento.financiado_plazo}</li>
                            <li>Enganche: ${NEXUS_CONFIG.financiamiento.financiado_enganche}</li>
                            <li>Tasa: ${NEXUS_CONFIG.financiamiento.financiado_tasa}</li>
                            <li>Ratificaci√≥n notarial: ${NEXUS_CONFIG.financiamiento.financiado_ratificacion}</li>
                        </ul>
                    </div>
                `;
                addMessage(financingHTML);
            }, 1200);
            
            setTimeout(() => {
                const promoBox = `
                    <div class="highlight-box">
                        <strong>üéÅ PREVENTA ACTIVA:</strong> Condiciones especiales disponibles
                    </div>
                `;
                addMessage(promoBox);
            }, 2400);
            
            setTimeout(() => {
                addMessage(
                    `¬øTe gustar√≠a calcular tu inversi√≥n o agendar una visita?`,
                    true,
                    { quickReplies: ['Calcular inversi√≥n', 'Agendar visita', 'M√°s info'] }
                );
            }, 3200);
        }

        function showInfrastructure() {
            addMessage(`üèóÔ∏è <strong>Infraestructura y Servicios NEXUS:</strong>`);
            
            setTimeout(() => {
                const infraHTML = `
                    <div class="info-card">
                        <ul>
                            ${NEXUS_CONFIG.infraestructura.map(i => `<li>${i}</li>`).join('')}
                        </ul>
                    </div>
                `;
                addMessage(infraHTML);
            }, 1000);
            
            setTimeout(() => {
                addMessage(
                    `Parque log√≠stico-industrial orientado a empresas de <strong>industria ligera y bajo riesgo</strong> con infraestructura moderna.`,
                    true,
                    { quickReplies: ['Ver zonas', 'Agendar visita', 'Financiamiento'] }
                );
            }, 2200);
        }

        function handleGeneralQuery(input) {
            const lowerInput = input.toLowerCase();
            
            if (lowerInput.includes('precio') || lowerInput.includes('costo') || lowerInput.includes('zona')) {
                showZones();
            }
            else if (lowerInput.includes('ubicaci√≥n') || lowerInput.includes('ubicacion') || 
                     lowerInput.includes('donde') || lowerInput.includes('mapa')) {
                showLocation();
            }
            else if (lowerInput.includes('financiamiento') || lowerInput.includes('financiar') ||
                     lowerInput.includes('mensualidades') || lowerInput.includes('contado')) {
                showFinancing();
            }
            else if (lowerInput.includes('infraestructura') || lowerInput.includes('servicios') ||
                     lowerInput.includes('amenidades') || lowerInput.includes('incluye')) {
                showInfrastructure();
            }
            else if (lowerInput.includes('contacto') || lowerInput.includes('tel√©fono') ||
                     lowerInput.includes('telefono') || lowerInput.includes('whatsapp')) {
                showContact();
            }
            else if (lowerInput.includes('horario')) {
                addMessage(`‚è∞ <strong>Horario de atenci√≥n:</strong><br>${NEXUS_CONFIG.horario}`);
                setTimeout(() => {
                    addMessage(`¬øTe gustar√≠a agendar una visita?`, 
                        true, 
                        { quickReplies: ['S√≠, agendar', 'Ver zonas', 'M√°s informaci√≥n'] }
                    );
                }, 1200);
            }
            else if (lowerInput.includes('agendar') || lowerInput.includes('visita') || lowerInput.includes('cita')) {
                conversationState.stage = 'collecting_contact';
                addMessage(`Perfecto! Agendemos tu visita a NEXUS. ¬øCu√°l es tu nombre completo?`);
            }
            else {
                addMessage(`Puedo ayudarte con informaci√≥n sobre:<br><br>` +
                    `‚Ä¢ üíé Zonas y precios<br>` +
                    `‚Ä¢ üìç Ubicaci√≥n estrat√©gica<br>` +
                    `‚Ä¢ üí≥ Financiamiento<br>` +
                    `‚Ä¢ üèóÔ∏è Infraestructura<br>` +
                    `‚Ä¢ üìÖ Agendar visita`,
                    true,
                    { quickReplies: ['Ver zonas', 'Ubicaci√≥n', 'Financiamiento', 'Agendar visita'] }
                );
            }
        }

        function showContact() {
            const contactHTML = `
                <div class="info-card">
                    <strong>üìû Judith Leal - Asesora NEXUS</strong><br><br>
                    <strong>WhatsApp:</strong> ${NEXUS_CONFIG.telefono}<br>
                    <strong>Email:</strong> ${NEXUS_CONFIG.email}<br>
                    <strong>Horario:</strong> ${NEXUS_CONFIG.horario}<br><br>
                    <strong>Web:</strong> ${NEXUS_CONFIG.website}
                </div>
            `;
            addMessage(contactHTML);
            
            setTimeout(() => {
                addMessage(
                    `¬øPrefieres que te llame o agendar una visita presencial?`,
                    true,
                    { quickReplies: ['Que me llamen', 'Agendar visita', 'Enviar WhatsApp'] }
                );
            }, 1500);
        }

        function handlePreContact(input) {
            const lowerInput = input.toLowerCase();
            
            if (lowerInput.includes('agendar') || lowerInput.includes('visita')) {
                conversationState.stage = 'collecting_contact';
                addMessage(`Perfecto! Agendemos tu visita a NEXUS. ¬øCu√°l es tu nombre completo?`);
            }
            else if (lowerInput.includes('llamar') || lowerInput.includes('llamen')) {
                conversationState.stage = 'collecting_contact';
                addMessage(`Con gusto te llamamos. Primero, ¬øcu√°l es tu nombre?`);
            }
            else if (lowerInput.includes('whatsapp')) {
                const whatsappLink = `https://wa.me/${NEXUS_CONFIG.whatsapp.replace(/\s/g, '')}?text=Hola Judith, me interesa NEXUS Centro Log√≠stico`;
                window.open(whatsappLink, '_blank');
                addMessage(`Te he redirigido a WhatsApp con Judith. Tambi√©n podemos agendar una visita aqu√≠.`,
                    true,
                    { quickReplies: ['Agendar visita', 'Ver zonas', 'M√°s informaci√≥n'] }
                );
            }
            else if (lowerInput.includes('calcular') || lowerInput.includes('inversi√≥n')) {
                conversationState.stage = 'qualifying';
                addMessage(`Para calcular tu inversi√≥n ideal, necesito algunos datos.`);
                setTimeout(() => askNextQualifyingQuestion(), 1000);
            }
            else if (lowerInput.includes('financiamiento') || lowerInput.includes('financiar')) {
                showFinancing();
            }
            else {
                addMessage(`¬øQu√© te gustar√≠a hacer?`,
                    true,
                    { quickReplies: ['Agendar visita', 'Calcular inversi√≥n', 'Ver financiamiento'] }
                );
            }
        }

        function askNextQualifyingQuestion() {
            const questionIndex = conversationState.currentQuestionIndex;
            
            if (questionIndex >= NEXUS_CONFIG.preguntasCalificacion.length) {
                showCalculation();
                return;
            }
            
            const question = NEXUS_CONFIG.preguntasCalificacion[questionIndex];
            addMessage(question.pregunta, true, { quickReplies: question.opciones });
        }

        function handleQualifyingQuestion(input) {
            const questionIndex = conversationState.currentQuestionIndex;
            const question = NEXUS_CONFIG.preguntasCalificacion[questionIndex];
            const lowerInput = input.toLowerCase();
            
            let isValidOption = false;
            let matchedOption = null;
            
            for (let option of question.opciones) {
                if (lowerInput.includes(option.toLowerCase().substring(0, 5)) || 
                    option.toLowerCase().includes(lowerInput.substring(0, 5))) {
                    isValidOption = true;
                    matchedOption = option;
                    break;
                }
            }
            
            if (!isValidOption) {
                if (question.id === 'superficie') {
                    const numero = parseInt(lowerInput.match(/\d+/)?.[0]);
                    if (numero) {
                        if (numero < 1000) matchedOption = "500-1,000 m¬≤";
                        else if (numero < 2000) matchedOption = "1,000-2,000 m¬≤";
                        else if (numero < 3000) matchedOption = "2,000-3,000 m¬≤";
                        else matchedOption = "M√°s de 3,000 m¬≤";
                        isValidOption = true;
                    }
                }
                
                if (question.id === 'urgencia') {
                    if (lowerInput.includes('urgente') || lowerInput.includes('ya') || lowerInput.includes('inmediato')) {
                        matchedOption = "Inmediato";
                        isValidOption = true;
                    }
                }
            }
            
            if (isValidOption && matchedOption) {
                conversationState.userData[question.campo] = matchedOption;
                
                if (matchedOption.includes('Inmediato')) conversationState.leadScore += 30;
                if (matchedOption.includes('20 millones') || matchedOption.includes('10-20')) conversationState.leadScore += 40;
                if (matchedOption.includes('2,000-3,000') || matchedOption.includes('M√°s de 3,000')) conversationState.leadScore += 20;
                
                if (matchedOption !== input) {
                    addMessage(`Entendido: <strong>${matchedOption}</strong> ‚úì`);
                }
                
                conversationState.currentQuestionIndex++;
                setTimeout(() => askNextQualifyingQuestion(), 800);
            }
            else {
                if (!conversationState.failedAttempts[questionIndex]) {
                    conversationState.failedAttempts[questionIndex] = 0;
                }
                conversationState.failedAttempts[questionIndex]++;
                
                if (conversationState.failedAttempts[questionIndex] >= 2) {
                    addMessage(`Selecciona la opci√≥n m√°s cercana:`,
                        true,
                        { quickReplies: [...question.opciones.slice(0, 3), 'Hablar con Judith'] }
                    );
                }
                else {
                    addMessage(`${question.pregunta}`,
                        true,
                        { quickReplies: question.opciones }
                    );
                }
            }
        }

        function showCalculation() {
            conversationState.stage = 'calculation_result';
            
            addMessage(`Perfecto! Bas√°ndome en tus necesidades:`);
            
            setTimeout(() => {
                const superficie = conversationState.userData.superficie_requerida;
                const presupuesto = conversationState.userData.presupuesto;
                
                let zonaRecomendada;
                if (conversationState.userData.tipo_operacion?.includes('corporativa')) {
                    zonaRecomendada = NEXUS_CONFIG.zonas[3];
                } else if (presupuesto?.includes('20 millones')) {
                    zonaRecomendada = NEXUS_CONFIG.zonas[2];
                } else if (presupuesto?.includes('10')) {
                    zonaRecomendada = NEXUS_CONFIG.zonas[1];
                } else {
                    zonaRecomendada = NEXUS_CONFIG.zonas[0];
                }
                
                const recomHTML = `
                    <div class="zone-card">
                        <h4>${zonaRecomendada.emoji} ${zonaRecomendada.nombre}</h4>
                        <div class="price">${zonaRecomendada.precio_m2}</div>
                        <div class="description">${zonaRecomendada.descripcion}</div>
                    </div>
                `;
                addMessage(recomHTML);
            }, 1200);
            
            setTimeout(() => {
                if (conversationState.leadScore >= 60) {
                    addMessage(
                        `üî• <strong>¬°Cliente Prioritario!</strong> Esta zona tiene alta demanda.<br><br>¬øTe gustar√≠a agendar una visita PRIORITARIA?`,
                        true,
                        { quickReplies: ['S√≠, agendar ahora', 'Ver financiamiento', 'Que me llamen'] }
                    );
                } else {
                    addMessage(
                        `¬øTe gustar√≠a conocer las opciones de financiamiento o agendar una visita?`,
                        true,
                        { quickReplies: ['Ver financiamiento', 'Agendar visita', 'M√°s informaci√≥n'] }
                    );
                }
            }, 2400);
        }

        let contactStep = 'name';

        function handleContactCollection(input) {
            const trimmedInput = input.trim();
            
            if (contactStep === 'name') {
                if (trimmedInput.length < 3) {
                    addMessage(`Por favor, escribe tu nombre completo.`);
                    return;
                }
                
                if (/^\d+$/.test(trimmedInput)) {
                    addMessage(`Necesito tu nombre, no un n√∫mero üòä`);
                    return;
                }
                
                conversationState.userData.nombre = trimmedInput;
                contactStep = 'phone';
                addMessage(`Encantada, ${trimmedInput}! üòä<br><br>¬øCu√°l es tu n√∫mero de tel√©fono?`);
            }
            else if (contactStep === 'phone') {
                const cleanPhone = trimmedInput.replace(/\D/g, '');
                
                if (cleanPhone.length < 10) {
                    addMessage(`Por favor, escribe un n√∫mero v√°lido (10 d√≠gitos).<br>Ejemplo: 341 170 7365`);
                    return;
                }
                
                conversationState.userData.telefono = cleanPhone;
                contactStep = 'email';
                addMessage(`Perfecto! üìû<br><br>Y tu correo electr√≥nico?`);
            }
            else if (contactStep === 'email') {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                
                if (!emailRegex.test(trimmedInput)) {
                    addMessage(`Ese correo no parece v√°lido.<br>Ejemplo: tu@empresa.com`);
                    return;
                }
                
                conversationState.userData.email = trimmedInput.toLowerCase();
                conversationState.stage = 'scheduling';
                contactStep = 'name';
                
                addMessage(`Excelente! ‚úÖ<br><br>¬øCu√°ndo te gustar√≠a visitar NEXUS?`,
                    true,
                    { quickReplies: ['Ma√±ana', 'Esta semana', 'Pr√≥xima semana', 'A convenir'] }
                );
            }
        }

        function handleScheduling(input) {
            const lowerInput = input.toLowerCase();
            let fechaInterpretada = null;
            
            if (lowerInput.includes('ma√±ana')) {
                const tomorrow = new Date();
                tomorrow.setDate(tomorrow.getDate() + 1);
                fechaInterpretada = `Ma√±ana ${tomorrow.toLocaleDateString('es-MX', { weekday: 'long', day: 'numeric', month: 'long' })}`;
            }
            else if (lowerInput.includes('esta semana')) {
                fechaInterpretada = 'Esta semana (confirmaremos d√≠a exacto)';
            }
            else if (lowerInput.includes('pr√≥xima') || lowerInput.includes('proxima')) {
                fechaInterpretada = 'Pr√≥xima semana (confirmaremos d√≠a exacto)';
            }
            else if (lowerInput.includes('convenir') || lowerInput.includes('flexible')) {
                fechaInterpretada = 'Por coordinar (horario flexible)';
            }
            else {
                fechaInterpretada = input;
            }
            
            conversationState.userData.fecha_preferida = fechaInterpretada;
            
            saveLead(conversationState.userData);
            
            let mensajeConfirmacion = '';
            if (conversationState.leadScore >= 70) {
                mensajeConfirmacion = `üéâ <strong>¬°EXCELENTE!</strong> Tu visita est√° confirmada como <strong>PRIORITARIA</strong> üî•<br><br>`;
            } else {
                mensajeConfirmacion = `üéâ <strong>¬°Listo!</strong> Tu visita a NEXUS est√° agendada.<br><br>`;
            }
            
            addMessage(mensajeConfirmacion +
                `üìÖ <strong>Fecha:</strong> ${fechaInterpretada}<br>` +
                `üë§ <strong>Nombre:</strong> ${conversationState.userData.nombre}<br>` +
                `üìû <strong>Tel√©fono:</strong> ${conversationState.userData.telefono}<br>` +
                `üìß <strong>Email:</strong> ${conversationState.userData.email}<br>` +
                `üéØ <strong>Lead Score:</strong> ${conversationState.leadScore}/100<br><br>` +
                `Judith te contactar√° por WhatsApp para confirmar los detalles.`
            );
            
            setTimeout(() => {
                const whatsappLink = `https://wa.me/${NEXUS_CONFIG.whatsapp.replace(/\s/g, '')}?text=Hola Judith, soy ${conversationState.userData.nombre}. Agend√© una visita a NEXUS para ${fechaInterpretada}`;
                addMessage(
                    `Tambi√©n puedes contactar directamente:<br><br>` +
                    `<a href="${whatsappLink}" target="_blank" style="background: #10b981; color: white; padding: 12px 24px; border-radius: 30px; text-decoration: none; display: inline-block; margin-top: 8px; font-weight: 600;">üí¨ Abrir WhatsApp con Judith</a>`,
                    true
                );
            }, 2200);
            
            setTimeout(() => {
                addMessage(
                    `Gracias por usar esta demo. Los datos capturados se muestran en la consola del navegador (F12) üîç`,
                    true,
                    { quickReplies: ['Ver zonas de nuevo', 'Reiniciar demo'] }
                );
                conversationState.stage = 'closing';
            }, 4000);
        }

        function saveLead(userData) {
            const leadData = {
                ...userData,
                leadScore: conversationState.leadScore,
                timestamp: new Date().toISOString(),
                origen: 'chatbot_nexus_demo',
                proyecto: 'NEXUS Centro Log√≠stico',
                asesora: 'Judith Leal'
            };
            
            console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
            console.log('üéâ LEAD NEXUS CAPTURADO CON √âXITO');
            console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
            console.log('');
            console.log('üìã DATOS DEL CLIENTE:');
            console.log('Nombre:', leadData.nombre);
            console.log('Tel√©fono:', leadData.telefono);
            console.log('Email:', leadData.email);
            console.log('Fecha preferida:', leadData.fecha_preferida);
            console.log('');
            console.log('üéØ DATOS DE NECESIDADES:');
            console.log('Superficie:', leadData.superficie_requerida || 'No especificada');
            console.log('Tipo operaci√≥n:', leadData.tipo_operacion || 'No especificado');
            console.log('Urgencia:', leadData.urgencia || 'No especificada');
            console.log('Presupuesto:', leadData.presupuesto || 'No especificado');
            console.log('');
            console.log('üìä M√âTRICAS:');
            console.log('Lead Score:', leadData.leadScore + '/100');
            console.log('Prioridad:', leadData.leadScore >= 70 ? 'üî• ALTA' : leadData.leadScore >= 50 ? '‚ö° MEDIA' : 'üìå NORMAL');
            console.log('Timestamp:', leadData.timestamp);
            console.log('Origen:', leadData.origen);
            console.log('Asesora:', leadData.asesora);
            console.log('');
            console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
            console.log('üí° Este lead est√° listo para integrarse con tu CRM');
            console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
            
            // Aqu√≠ integrar√≠as con tu CRM real
            // fetch('https://tu-crm.com/api/leads', {
            //     method: 'POST',
            //     headers: { 'Content-Type': 'application/json' },
            //     body: JSON.stringify(leadData)
            // });
        }

        // Initialize notification badge animation
        window.addEventListener('load', () => {
            setTimeout(() => {
                if (!chatContainer.classList.contains('active')) {
                    notificationBadge.style.display = 'flex';
                }
            }, 3000);
        });
    </script>
</body>
</html>
